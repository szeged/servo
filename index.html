<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>WebBluetooth in Servo</title>
    <link rel="icon" type="image/png" href="https://download.servo.org/doge-tiny.png">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>

    <div class="jumbotron wbt-jumbotron">
      <div class="container">
        <img src="images/doge_badge.png" class="img-responsive center-block" style="width:300px;height:300px;">

        <p class="text-primary">WebBluetooth in Servo</p>

        <p style="text-align: center;">
            <a class="btn btn-primary btn-lg" href="http://servo.org" target="_blank" role="button">
                Servo &raquo;
            </a>
            <a class="btn btn-primary btn-lg" href="https://webbluetoothcg.github.io/web-bluetooth/" target="_blank" role="button">
                WebBluetooth &raquo;
            </a>
            <a class="btn btn-primary btn-lg" href="demos" target="_blank" role="button">
                Demos &raquo;
            </a>
        </p>
      </div>
    </div>

    <div class="col-md-2"></div>
    <div class="container col-md-8">

      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <h2>Introduction</h2>
          <p>
          <b>Servo</b> is a modern, high-performance browser engine designed for both application and embedded use.
          </p>

          <p>
          Sponsored by <b>Mozilla</b> and written in the new language <a href="http://www.rust-lang.org/" target="_blank">Rust</a>, the Servo project aims to achieve better parallelism, security, modularity, and performance.
          </p>
          <p>
          <b>Bluetooth</b> is a standard for short-range wireless communication between devices. The <a href="https://www.w3.org/community/web-bluetooth/" target="_blank">Web Bluetooth Community Group</a> is developing a specification for Bluetooth APIs to allow websites to communicate with devices in a secure and privacy-preserving way. In particular, the <b>Web Bluetooth API</b> focuses on minimizing the device attack surface exposed to malicious websites, possibly by removing access to some existing Bluetooth features that are hard to implement securely. Further, the API takes the approach of a user interface to select and approve access to devices as opposed to using certification and installation.
          </p>
        </div>
        <!--<div class="col-md-4">
          <iframe height="600" width="150%" src="demo.mp4" type="video/mp4">
          </iframe>
        </div>-->
        <!--<div class="col-md-3">
          <img src="images/doge_sunglass.png" class="img-responsive center-block" style="width:150px;height:150px;margin : 40px auto 0 auto;">
        </div>-->
      </div>

      <hr>

      <div class="row" id="status">
        <!--<div class="col-md-3">
          <img src="images/doge_worker.png" class="img-responsive center-block" style="width:200px;height:200px;">
        </div>-->
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <h2>Implementation Status</h2>
          <table class="table table-bordered">
            <tr rowspan="3" class="impl-status-cell">
              <th>Platform</th>
              <th>Prerequisites</th>
              <th>Status</th>
            </tr>
            <tr rowspan="3" class="impl-status-cell">
              <td>Linux</td>
              <td>
                Requires Kernel 3.19+ and BlueZ 5.39+ installed. <br>
                You can read more about <a href="setup">here</a>.
              </td>
              <td class="success">Supported</td>
            </tr>
            <tr rowspan="3" class="impl-status-cell">
              <td>Android</td>
              <td>Android 4.3 (Jelly Bean)</td>
              <td class="success">Supported*</td>
            </tr>
            <tr rowspan="3" class="impl-status-cell">
              <td>Windows</td>
              <td>Requires Windows 8.1.</td>
              <td class="danger">No progress</td>
            </tr>
            <tr rowspan="3" class="impl-status-cell">
              <td>macOS/iOS</td>
              <td>N/A</td>
              <td class="danger">No progress</td>
          </table>
          <b>Important</b>: No support for notifications or events.
          You can subcribe for them, but there won't be any trigger.
          <br>
          * No popup support on Android
          <hr>
          <table class="table table-bordered">
            <tr rowspan="4" class="impl-status-cell">
              <th>Feature</th>
              <th>Status</th>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">getAvailability()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Referring Device (Physical Web)</td>
              <td class="danger">No progress</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Discovery</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">└ Service list</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">└ Name or prefix</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">└ Manufacturer/Service data</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">└ acceptAllDevices</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Chooser UI</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature"><a href="https://www.w3.org/TR/permissions/">Permission API</a> integration</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">└ permissions.request()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">└ permissions.query()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">└ permissions.revoke()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">watchAdvertisements()</td>
              <td class="warning">Partial</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Persistent Device IDs</td>
              <td class="danger">No progress</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">GATT Server Connect</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">GATT Server Disconnect</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Hanging connect() abortable by disconnect()</td>
              <td class="danger">No progress</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">GATT Advertising event</td>
              <td class="warning">Partial</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">getPrimaryService*()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">getIncludedService*()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">getCharacteristic*()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Characteristic Properties</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Read Characteristic</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Write Characteristic</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Start GATT Notifications</td>
              <td class="warning">Partial</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Stop GATT Notifications</td>
              <td class="warning">Partial</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">{start,stop}Notifications returns `this`</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">getDescriptor*()</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Read Descriptor</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Write Descriptor</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Event bubbling</td>
              <td class="warning">Partial</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Device Disconnected Event</td>
              <td class="danger">No progress</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Service Changed Event</td>
              <td class="danger">No progress</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">BluetoothUUID</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">TypeError for bad UUIDs</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Invalidate GATT attributes upon disconnect</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">GATT Blocklist</td>
              <td class="success">Done</td>
            </tr>
            <tr rowspan="4" class="impl-status-cell">
              <td class="feature">Low-latency Blocklist Updates</td>
              <td class="danger">No progress</td>
            </tr>
          </table>
       </div>
      </div>

      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <h2>How to use Web Bluetooth</h2>
          <h3>Requirement</h3>
          <p>
            First of all you have to install the bluetooth support on your OS. Check out our <a href="setup/">guide</a> how to setup the basic environment.
          </p>
          <h3>Building</h3>
          <p>
            There is no special build flag or option which is required to build Servo with Web Bluetooth support. All information how to compile <b>Servo</b> can be found at <a href="https://github.com/servo/servo#building">Servo's GitHub</a> page.
          </p>
          <h3>Running</h3>
          <p>
            The support of Web Bluetooth is behind a <i>pref</i> option. So, in order to use a bluetooth device you should add only one extra parameter to the command line: <code class="text-nowrap">--pref=dom.bluetooth.enabled</code>. For example:
          </p>
          <p>
            <code>./mach run --release --pref=dom.bluetooth.enabled</code>
          </p>
          <h3>Testing</h3>
          <p>
            If you are about to test the Web Bluetooth implementation in Servo, you can use the Web Platform Tests. For example:
          </p>
          <p>
            <code>./mach test-wpt tests/wpt/mozilla/tests/mozilla/bluetooth/ --pref=dom.bluetooth.enabled --pref=dom.bluetooth.testing.enabled --pref=dom.permissions.enabled</code>
          </p>
          <small>
            Note: you have to enable the bluetooth test device and permissions features as well. Since the WPT testing works on an artificial hardware.
          </small>
        </div>
      </div>

      <hr>
      <div class="row">
        <div class="col-md-4">
          <h2>Servo Blog</h2>
          <p>Weekly news, status about Servo.</p>
          <br>
          <p><a class="btn btn-default" href="https://blog.servo.org/" role="button">View details &raquo;</a></p>
        </div>
        <div class="col-md-4">
          <h2>WBT Setup</h2>
          <p>How to setup WebBluetooth.</p>
          <br>
          <p><a class="btn btn-default" href="setup" role="button">View details &raquo;</a></p>
       </div>
        <div class="col-md-4">
          <h2>Testing</h2>
          <p>Testing WebBluetooh features.</p>
          <br>
          <p><a class="btn btn-default" href="testing" role="button">View details &raquo;</a></p>
        </div>
      </div>
      <hr>

      <footer>
        <div class="row">
          <div class="col-md-6">
            <p>&copy; 2016-<script>document.write(new Date().getFullYear())</script> University of Szeged, DSE</p>
          </div>
          <div class="col-md-6 license-button-container">
            <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
              <img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
            </a>
          </div>
        </div>
      </footer>
    </div> <!-- /container -->
    <div class="col-md-2"></div>

  </body>
</html>
